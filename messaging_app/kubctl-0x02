
# Apply both deployments
echo "ğŸš€ Deploying blue version..."
kubectl apply -f blue_deployment.yaml

echo "ğŸš€ Deploying green version..."
kubectl apply -f green_deployment.yaml


# Apply service (initially pointing to blue)
echo "ğŸ”§ Applying service routing to blue..."
kubectl apply -f kubeservice.yaml

# Wait briefly
echo "â³ Waiting 10s for pods to start..."
sleep 10

# Get pod name for green
GREEN_POD= $(kubectl get pods -l app=django,version=green)

echo "ğŸ” Checking logs for green deployment pod: $GREEN_POD"
kubectl logs "$GREEN_POD"
